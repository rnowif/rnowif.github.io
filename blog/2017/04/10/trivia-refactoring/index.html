<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>Trivia Kata: A Refactoring Story - Renaud Humbert-Labeaumaz</title>
  <meta name="author" content="Renaud Humbert-Labeaumaz">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://rnowif.github.io/blog/2017/04/10/trivia-refactoring/">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Renaud Humbert-Labeaumaz" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://rnowif.github.io/blog/2017/04/10/trivia-refactoring/">
  <meta property="og:title" content="Trivia Kata: A Refactoring Story - Renaud Humbert-Labeaumaz">
  

  <script src="/javascripts/libs/jquery/jquery-2.1.3.min.js"></script>

<link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


  
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">

  
   <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-127790305-1', 'auto');
    ga('send', 'pageview');

  </script>


</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      
        <header role="banner">
          <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" title="toggle navbar" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Renaud Humbert-Labeaumaz</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li ><a href="/blog/archives">Archives</a></li>

            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="navbar-form navbar-right" action="https://www.google.com/search" method="GET">
                    <input type="hidden" name="sitesearch" value="rnowif.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


        </header>
      
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="Renaud Humbert-Labeaumaz" />
    
    <meta itemprop="url" content="https://rnowif.github.io" />
    <article class="hentry" role="article" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
      
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-04-10T07:52:15+01:00"  data-updated="true" itemprop="datePublished dateCreated">Mon 10 Apr 2017,  7:52 AM</time>
        
      </p>
    
    
    <h1 class="entry-title" itemprop="name headline">
        Trivia Kata: A Refactoring Story
        
    </h1>
    
  </header>


<div class="entry-content clearfix" itemprop="articleBody description"><p>Refactoring a legacy code can be a tricky business. More often than not, the code is not tested, unclear and contains some bugs. If not planned, the time required to refactor will eat all the time allocated to the feature. The feature will then be implemented very quickly and it will result in more buggy unmaintainable code.</p>

<p>In this blog post, I will try to show some tools and methods to refactor safely a piece of code. I will use the <a href="https://github.com/jbrains/trivia">trivia kata</a> as a support for this. The resulting code can be found on <a href="https://github.com/rnowif/trivia-refactoring/commits/master">GitHub</a>.</p>

<!-- more -->


<h2>Characterization Test: the Golden Master</h2>

<p>The prerequisite to any refactor is to build a test harness to be sure that the refactoring will not break anything. In this example, it could seem like a waste of time to test all possible paths with unit tests. Fortunately, the code contains a lot of traces that print what the code does. It is then possible to run the code with a set of inputs, capture the output and save it. This output is called the <em>Golden Master</em>. Every time the code is modified, the same inputs are used to run the code and the output is compared to the golden master. As you may have noticed, this will not ensure that the code is bug-free, it will just make sure that the code always <strong>behaves</strong> the same.</p>

<p>In Java, the golden master can be implemented using a library called <em>approval</em>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">com</span><span class="o">.</span><span class="na">github</span><span class="o">.</span><span class="na">nikolavp</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">approval</span><span class="o">-</span><span class="n">core</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">0.3</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The associated test is shown below (see <a href="https://github.com/rnowif/trivia-refactoring/commit/0c4255e69cc5395a70de417913de20c82606b0c2">commit</a>):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@Test</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">should_record_and_verify_golden_master</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">playGame</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Approvals</span><span class="o">.</span><span class="na">verify</span><span class="o">(</span><span class="n">result</span><span class="o">,</span> <span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;src&quot;</span><span class="o">,</span> <span class="s">&quot;main&quot;</span><span class="o">,</span> <span class="s">&quot;resources&quot;</span><span class="o">,</span> <span class="s">&quot;approval&quot;</span><span class="o">,</span> <span class="s">&quot;result.txt&quot;</span><span class="o">));</span> <span class="c1">// 2</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">private</span> <span class="n">String</span> <span class="nf">playGame</span><span class="o">(</span><span class="kt">long</span> <span class="n">seed</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">ByteArrayOutputStream</span> <span class="n">outputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ByteArrayOutputStream</span><span class="o">();</span>
</span><span class='line'>    <span class="n">System</span><span class="o">.</span><span class="na">setOut</span><span class="o">(</span><span class="k">new</span> <span class="nf">PrintStream</span><span class="o">(</span><span class="n">outputStream</span><span class="o">));</span> <span class="c1">// 3</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">boolean</span> <span class="n">notAWinner</span><span class="o">;</span>
</span><span class='line'>    <span class="n">Game</span> <span class="n">aGame</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Game</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">aGame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Chet&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="n">aGame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Pat&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="n">aGame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Sue&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Random</span> <span class="n">rand</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Random</span><span class="o">(</span><span class="n">seed</span><span class="o">);</span> <span class="c1">// 1</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">do</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">aGame</span><span class="o">.</span><span class="na">roll</span><span class="o">(</span><span class="n">rand</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">rand</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">9</span><span class="o">)</span> <span class="o">==</span> <span class="mi">7</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">notAWinner</span> <span class="o">=</span> <span class="n">aGame</span><span class="o">.</span><span class="na">wrongAnswer</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">notAWinner</span> <span class="o">=</span> <span class="n">aGame</span><span class="o">.</span><span class="na">wasCorrectlyAnswered</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">}</span> <span class="k">while</span> <span class="o">(</span><span class="n">notAWinner</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="k">new</span> <span class="nf">String</span><span class="o">(</span><span class="n">outputStream</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">());</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Since the code uses a <code>Random</code> to roll a dice, we have to fix the seed of the <code>Random</code> so it always returns the same random rolls in the same order (<code>1</code>). The code has to be run once with this seed and the output has to be pasted into <code>src/main/resources/approval/result.txt</code> to create the golden master (<code>2</code>). Afterwards, the test will capture the output (<code>3</code>) and compare it to the golden master. If a difference appears, a diff will prompt.</p>

<p>Sometimes during my refactoring sessions, I like to make mistakes on purpose just to check the robustness of my test harness. I find it very useful to increase the confidence you have in your tests and fix them if you have to.</p>

<h2>First Step: Clean Up</h2>

<p>Personnaly, I can&rsquo;t really think when I am in front of a bloated and unclear code. Thus, the first thing I did to refactor this piece of code is to rearrange it, delete unused imports and dead code, remove magic strings and magic numbers, use generics and reduce the visibility of fields and methods that can be reduced to be sure that I can touch them without breaking the public API. The major part of these refactorings can be made for you by your IDE so don&rsquo;t hesitate to do it as it reduces the risk of error and it is much quicker. You can also use a plugin like <a href="http://www.sonarlint.org/index.html">SonarLint</a> for instance to detect issues directly into your IDE.</p>

<p>Once the code easier to think about, I noticed that strings where used to identify categories. This seemed like a good place to create an enum (see <a href="https://github.com/rnowif/trivia-refactoring/commit/1578c0ce9d7da73641e5f4202b1a72f00ba13723">commit</a>). To start, I just replaced the strings with the enum:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kt">void</span> <span class="nf">askQuestion</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">currentCategory</span><span class="o">()</span> <span class="o">==</span> <span class="s">&quot;Pop&quot;</span><span class="o">)</span>
</span><span class='line'>        <span class="n">print</span><span class="o">(</span><span class="n">popQuestions</span><span class="o">.</span><span class="na">removeFirst</span><span class="o">());</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">currentCategory</span><span class="o">()</span> <span class="o">==</span> <span class="s">&quot;Science&quot;</span><span class="o">)</span>
</span><span class='line'>        <span class="n">print</span><span class="o">(</span><span class="n">scienceQuestions</span><span class="o">.</span><span class="na">removeFirst</span><span class="o">());</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">currentCategory</span><span class="o">()</span> <span class="o">==</span> <span class="s">&quot;Sports&quot;</span><span class="o">)</span>
</span><span class='line'>        <span class="n">print</span><span class="o">(</span><span class="n">sportsQuestions</span><span class="o">.</span><span class="na">removeFirst</span><span class="o">());</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">currentCategory</span><span class="o">()</span> <span class="o">==</span> <span class="s">&quot;Rock&quot;</span><span class="o">)</span>
</span><span class='line'>        <span class="n">print</span><span class="o">(</span><span class="n">rockQuestions</span><span class="o">.</span><span class="na">removeFirst</span><span class="o">());</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">private</span> <span class="n">String</span> <span class="nf">currentCategory</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;Pop&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">4</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;Pop&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">8</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;Pop&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;Science&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">5</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;Science&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">9</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;Science&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">2</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;Sports&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">6</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;Sports&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">10</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;Sports&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="k">return</span> <span class="s">&quot;Rock&quot;</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>became</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kt">void</span> <span class="nf">askQuestion</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">currentCategory</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">Category</span><span class="o">.</span><span class="na">POP</span><span class="o">))</span>
</span><span class='line'>        <span class="n">print</span><span class="o">(</span><span class="n">popQuestions</span><span class="o">.</span><span class="na">removeFirst</span><span class="o">());</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">currentCategory</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">Category</span><span class="o">.</span><span class="na">SCIENCE</span><span class="o">))</span>
</span><span class='line'>        <span class="n">print</span><span class="o">(</span><span class="n">scienceQuestions</span><span class="o">.</span><span class="na">removeFirst</span><span class="o">());</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">currentCategory</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">Category</span><span class="o">.</span><span class="na">SPORTS</span><span class="o">))</span>
</span><span class='line'>        <span class="n">print</span><span class="o">(</span><span class="n">sportsQuestions</span><span class="o">.</span><span class="na">removeFirst</span><span class="o">());</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">currentCategory</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">Category</span><span class="o">.</span><span class="na">ROCK</span><span class="o">))</span>
</span><span class='line'>        <span class="n">print</span><span class="o">(</span><span class="n">rockQuestions</span><span class="o">.</span><span class="na">removeFirst</span><span class="o">());</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">private</span> <span class="n">Category</span> <span class="nf">currentCategory</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="k">return</span> <span class="n">Category</span><span class="o">.</span><span class="na">POP</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">4</span><span class="o">)</span> <span class="k">return</span> <span class="n">Category</span><span class="o">.</span><span class="na">POP</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">8</span><span class="o">)</span> <span class="k">return</span> <span class="n">Category</span><span class="o">.</span><span class="na">POP</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="k">return</span> <span class="n">Category</span><span class="o">.</span><span class="na">SCIENCE</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">5</span><span class="o">)</span> <span class="k">return</span> <span class="n">Category</span><span class="o">.</span><span class="na">SCIENCE</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">9</span><span class="o">)</span> <span class="k">return</span> <span class="n">Category</span><span class="o">.</span><span class="na">SCIENCE</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">2</span><span class="o">)</span> <span class="k">return</span> <span class="n">Category</span><span class="o">.</span><span class="na">SPORTS</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">6</span><span class="o">)</span> <span class="k">return</span> <span class="n">Category</span><span class="o">.</span><span class="na">SPORTS</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">==</span> <span class="mi">10</span><span class="o">)</span> <span class="k">return</span> <span class="n">Category</span><span class="o">.</span><span class="na">SPORTS</span><span class="o">;</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">Category</span><span class="o">.</span><span class="na">ROCK</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This kind of <code>if</code> statement that looks a lot like a <code>switch</code> can almost always be replaced by a <code>Map</code> so that is what I did (see <a href="https://github.com/rnowif/trivia-refactoring/commit/b8780743929eb10ab5f8a90c9fe68c9dd3c310a9">commit</a>). I created two maps to contain questions of each category and the category for each position:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kt">void</span> <span class="nf">askQuestion</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">print</span><span class="o">(</span><span class="n">questionsByCategory</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currentCategory</span><span class="o">()).</span><span class="na">removeFirst</span><span class="o">());</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">private</span> <span class="n">Category</span> <span class="nf">currentCategory</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>   <span class="k">return</span> <span class="n">categoriesByPosition</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currentPosition</span><span class="o">());</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Second Step: Segregate</h2>

<p>The second step I chose to follow is to put specific logic into private methods. Once again, your IDE can help you here, use it!</p>

<p>For instance, that piece of code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">print</span><span class="o">(</span><span class="n">players</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currentPlayer</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; is getting out of the penalty box&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">=</span> <span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">+</span> <span class="n">roll</span><span class="o">;</span>
</span><span class='line'><span class="k">if</span> <span class="o">(</span><span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">&gt;=</span> <span class="n">NB_CELLS</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">=</span> <span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]</span> <span class="o">-</span> <span class="n">NB_CELLS</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">print</span><span class="o">(</span><span class="n">players</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currentPlayer</span><span class="o">)</span>  <span class="o">+</span> <span class="s">&quot;&#39;s new location is &quot;</span> <span class="o">+</span> <span class="n">places</span><span class="o">[</span><span class="n">currentPlayer</span><span class="o">]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>became</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">print</span><span class="o">(</span><span class="n">players</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currentPlayer</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; is getting out of the penalty box&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">move</span><span class="o">(</span><span class="n">roll</span><span class="o">);</span>
</span><span class='line'><span class="n">print</span><span class="o">(</span><span class="n">players</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currentPlayer</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;&#39;s new location is &quot;</span> <span class="o">+</span> <span class="n">currentPosition</span><span class="o">());</span>
</span></code></pre></td></tr></table></div></figure>


<p>By doing that, you can remove duplication by factorizing algorithms (like move a player) into specific methods. Moreover, you prepare the field for extracting objects from this code (see the next section). However, in order to do that properly, the private methods have to be in the purest form possible: they should use or modify the least amount of private fields possible (see <a href="https://github.com/rnowif/trivia-refactoring/commit/160c52d4a393fef3a58ad062fa9b552f0a9631a0">commit</a>). With that in mind, the following code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="n">Category</span> <span class="nf">currentCategory</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">categoriesByPosition</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currentPosition</span><span class="o">());</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>has been replaced by</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="n">Category</span> <span class="nf">currentCategory</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">categoriesByPosition</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Third Step: Divide and Conquer</h2>

<p>Now that logic has been segregated into private methods, it is pretty straightforward to extract objects from these methods.</p>

<p>In this kata, we saw that several concepts emerge: <code>Player</code>, <code>Board</code> and <code>QuestionDeck</code>. A <code>PlayerList</code> class has also been added to handle the players rotation. All these classes can be tested in isolation in order not to rely solely on the golden master anymore.</p>

<p>For instance, the following code prints the next question to ask:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">roll</span><span class="o">(</span><span class="kt">int</span> <span class="n">roll</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// ...</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">Category</span> <span class="n">currentCategory</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="na">categoryOf</span><span class="o">(</span><span class="n">newPosition</span><span class="o">);</span>
</span><span class='line'>  <span class="n">print</span><span class="o">(</span><span class="s">&quot;The category is &quot;</span> <span class="o">+</span> <span class="n">currentCategory</span><span class="o">);</span>
</span><span class='line'>  <span class="n">print</span><span class="o">(</span><span class="n">nextQuestionAbout</span><span class="o">(</span><span class="n">currentCategory</span><span class="o">));</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">private</span> <span class="n">String</span> <span class="nf">nextQuestionAbout</span><span class="o">(</span><span class="n">Category</span> <span class="n">category</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">questionsByCategory</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">category</span><span class="o">).</span><span class="na">removeFirst</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>By creating a <code>QuestionDeck</code> object, we can have a code like this (see <a href="https://github.com/rnowif/trivia-refactoring/commit/6ae3f22923b425d51f7fb657d7236926d2149309">commit</a>):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">roll</span><span class="o">(</span><span class="kt">int</span> <span class="n">roll</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// QuestionDeck deck = new QuestionDeck(NB_QUESTIONS, CATEGORIES);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">Category</span> <span class="n">currentCategory</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="na">categoryOf</span><span class="o">(</span><span class="n">newPosition</span><span class="o">);</span>
</span><span class='line'>  <span class="n">print</span><span class="o">(</span><span class="s">&quot;The category is &quot;</span> <span class="o">+</span> <span class="n">currentCategory</span><span class="o">);</span>
</span><span class='line'>  <span class="n">print</span><span class="o">(</span><span class="n">deck</span><span class="o">.</span><span class="na">nextQuestionAbout</span><span class="o">(</span><span class="n">currentCategory</span><span class="o">));</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The private method <code>nextQuestionAbout</code> and the field <code>questionsByCategory</code> are no longer in the <code>Game</code> class.</p>

<p>When you extract classes from the main code, it is very important not to break the public API. It is possible to annotate some methods with <code>@Deprecated</code> though (see <a href="https://github.com/rnowif/trivia-refactoring/commit/a7c4d85c50395a0a66908eb15e3926b6d8d822de">commit</a>). A good example of this can be seen in this <a href="https://www.crafties.fr/videos/2017-02-27-episode-9-refactoring-dependances-statiques.html">video</a>.</p>

<h2>Fourth Step: Break up</h2>

<p>The last step is when we remove all deprecated methods that we introduced during the refactoring. It is not always possible to do it right after the refactoring session as we don&rsquo;t always have access to the client code that consumes our public API. In this case we do, so I removed these methods (see <a href="https://github.com/rnowif/trivia-refactoring/commit/eb7ab019f62808b589de0f6a4fcf904163fd667d">commit</a>).</p>

<p>The client code looked like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Game</span> <span class="n">aGame</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Game</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'><span class="n">aGame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Chet&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">aGame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Pat&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">aGame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Sue&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// aGame.roll()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now the <code>Game</code> class is not in charge of questions, board, categories and players anymore so we have to inject them into the constructor.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">NB_CELLS</span> <span class="o">=</span> <span class="mi">12</span><span class="o">;</span>
</span><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">NB_QUESTIONS</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>
</span><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Category</span><span class="o">&gt;</span> <span class="n">CATEGORIES</span> <span class="o">=</span> <span class="n">asList</span><span class="o">(</span><span class="n">Category</span><span class="o">.</span><span class="na">POP</span><span class="o">,</span> <span class="n">Category</span><span class="o">.</span><span class="na">SCIENCE</span><span class="o">,</span> <span class="n">Category</span><span class="o">.</span><span class="na">SPORTS</span><span class="o">,</span> <span class="n">Category</span><span class="o">.</span><span class="na">ROCK</span><span class="o">);</span>
</span><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">PLAYERS</span> <span class="o">=</span> <span class="n">asList</span><span class="o">(</span><span class="s">&quot;Chet&quot;</span><span class="o">,</span> <span class="s">&quot;Pat&quot;</span><span class="o">,</span> <span class="s">&quot;Sue&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// ...</span>
</span><span class='line'><span class="n">Game</span> <span class="n">aGame</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Game</span><span class="o">(</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">,</span>
</span><span class='line'>        <span class="k">new</span> <span class="nf">Board</span><span class="o">(</span><span class="n">NB_CELLS</span><span class="o">,</span> <span class="n">CATEGORIES</span><span class="o">),</span>
</span><span class='line'>        <span class="k">new</span> <span class="nf">QuestionDeck</span><span class="o">(</span><span class="n">NB_QUESTIONS</span><span class="o">,</span> <span class="n">CATEGORIES</span><span class="o">),</span>
</span><span class='line'>        <span class="k">new</span> <span class="nf">PlayerList</span><span class="o">(</span><span class="n">PLAYERS</span><span class="o">)</span>
</span><span class='line'><span class="o">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// aGame.roll()</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Wrapping Up</h2>

<p>Of course, as it is always the case with refactoring, I could have done more. The main risk is that <em>more</em> does not always mean <em>better</em>. A refactoring session must have a purpose and it is very important to know when to stop. It could be when you can add your new feature or fix a bug seamlessly or simply because you don&rsquo;t have any more time allocated to this task.</p>

<p>I hope that this post gave you some tools and methods to refactor your code without the fear of breaking something.</p>
</div>


      <footer class="post-footer">
        <p class="meta text-muted">
          
  



<figure class="author-image">
    <span class="img" href="/about" style="background-image: url(/images/renaud.png)"><span class="hidden">Picture</span></span>
</figure>

<section class="author">
    <h4><span class="byline author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="fn" itemprop="name">Renaud Humbert-Labeaumaz</span></span></h4>

    <a class="fa fa-link" href="https://rnowif.github.io">
        <span class="hidden">https://rnowif.github.io</span>
    </a>
    <a class="fa fa-twitter" href="https://twitter.com/rnowif">
        <span class="hidden">rnowif</span>
    </a>
    <a class="fa fa-github" href="https://github.com/rnowif">
        <span class="hidden">rnowif</span>
    </a>
</section>

<hr>

<section class="share">
    
    <h4>Share this post</h4>
    
    <a class="fa fa-twitter" href="https://twitter.com/intent/tweet?url=https://rnowif.github.io/blog/2017/04/10/trivia-refactoring/;"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="fa fa-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://rnowif.github.io/blog/2017/04/10/trivia-refactoring/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="fa fa-google-plus" href="https://plus.google.com/share?url=https://rnowif.github.io/blog/2017/04/10/trivia-refactoring/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
    
</section>




<!--
<footer class="post-footer">


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=Instant%20Movie%20Streamer%20v3%20Release&amp;url=http://iyask.me/instant-movie-streamer-v3-release/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://iyask.me/instant-movie-streamer-v3-release/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://iyask.me/instant-movie-streamer-v3-release/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>


        </footer>


-->

          












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-04-10T07:52:15+01:00"  data-updated="true" itemprop="datePublished dateCreated">Mon 10 Apr 2017,  7:52 AM</time>
          <br>

<span class="glyphicon glyphicon-tags"></span>&nbsp;
<span class="categories">
  
    <a class='category' href='/blog/categories/java/'>java</a>, <a class='category' href='/blog/categories/refactoring/'>refactoring</a>
  
</span>


        </p>
        
          <div class="pager">
            
            
              
                <a href="/blog/2016/12/26/pourquoi-utiliser-le-tdd-pour-apprendre-langage/" class="col-xs-12 col-md-4 btn btn-default" title="Previous Post: Pourquoi utiliser le TDD est une bonne idée pour apprendre un nouveau langage"> 
                  <div class="text-muted">
                    <small>Previous Post</small>
                  </div>
                  <div class="pager-title">
                    <h4>Pourquoi utiliser le TDD est une bonne idée pour apprendre un nouveau langage</h4>
                  </div>
                </a>
              
            
            
            
              
              <a href="/blog/2017/04/11/git-reflog/" class="col-xs-12 col-md-4 btn btn-default pull-right" title="Next Post: Keep Calm and Use Git Reflog">
                <div class="text-muted">
                  <small>Next Post</small>
                </div>
                <div class="pager-title">
                  <h4>Keep Calm and Use Git Reflog</h4>
                </div>
              </a>
              
            
            
          </div>
        
      </footer>
    </article>
    
      <section>
        <h2>Comments</h2>
        <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
      </section>
    
  </div>
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2020 - Renaud Humbert-Labeaumaz<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/bhrigu123/abacus">abacus theme</a></span>.
  </small>
</p>

</div>
</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'rnowif';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'https://rnowif.github.io/blog/2017/04/10/trivia-refactoring/';
        var disqus_url = 'https://rnowif.github.io/blog/2017/04/10/trivia-refactoring/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr.js"></script>


  </body>
</html>
